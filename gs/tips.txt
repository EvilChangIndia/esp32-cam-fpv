
New driver installation for tp link TL-WN722N V2:

sudo apt install raspberrypi-kernel-headers aircrack-ng bc
sudo rmmod r8188eu.ko (optional. I dint use this)
git clone https://github.com/aircrack-ng/rtl8188eus
cd rtl8188eus
sudo -i
echo "blacklist r8188eu"> "/etc/modprobe.d/realtek.conf"
exit
make
sudo make install
sudo modprobe 8188eu




Disabling Network Manager for our adapter:
We have two methods for this:
Method 1:
	The procedure to enable monitor mode involves shutting down network manager while we switch the mode for our interface device. This completely shuts it down. This means the inbuilt wifi adapter also becomes easily configurable, for our connection to pc *eg. For SSH)
	So, i decided to disable network manager only for the adapter by using its Mac address

	For this, I made a new config file with any name (eg. "dontManageTP.conf") at 

	cd /etc/NetworkManager/conf.d/

	sudo nano dontManageTP.conf

	And added this inside: 

[main]
plugins=ifupdown, keyfile

[ifupdown]
managed=false

[keyfile]
unmanged-devices=mac:<macaddress of our interface, found using 'ifconfig wlan0'>

	Do a quick restart after making these changes.

	sudo reboot

	Note that the conf file follows asci order and the last conf file has most priority (implemented last)


Method 2:
Here we just kill the network manager
airmon-ng check kill




Set the usb dongles to wlan1 and wlan2 by changing the systemd-predictable mechanism:

1. switch off systemd-predictable mechanism stuff (unless done already):
Code: Select all

sudo ln -nfs /dev/null /etc/systemd/network/99-default.link

2. setup udev rules that uniquely identify your interfaces based on their USB connector positions:

Simply create a file:
sudo nano /etc/udev/rules.d/72-wlan-geo-dependent.rules

with following content:

#
# +---------------+
# | wlan1 | wlan2 |
# +-------+-------+
# | wlan3 | wlan4 |
# +---------------+ (RPI USB ports with position dependent device names for up to 4 optional wifi dongles)
# 
# | wlan0 | (onboard wifi)
#
ACTION=="add", SUBSYSTEM=="net", SUBSYSTEMS=="sdio", KERNELS=="mmc1:0001:1", NAME="wlan0"
ACTION=="add", SUBSYSTEM=="net", SUBSYSTEMS=="usb",  KERNELS=="1-1.2",       NAME="wlan1"
ACTION=="add", SUBSYSTEM=="net", SUBSYSTEMS=="usb",  KERNELS=="1-1.4",       NAME="wlan2"
ACTION=="add", SUBSYSTEM=="net", SUBSYSTEMS=="usb",  KERNELS=="1-1.3",       NAME="wlan3"
ACTION=="add", SUBSYSTEM=="net", SUBSYSTEMS=="usb",  KERNELS=="1-1.5",       NAME="wlan4"


save, exit, and reboot.

Confirm correct wlan numbering by running : 
iwconfig

Now, run monitor.sh to manually set the adapters to monitor mode. You'll have to make it executable first by using chmod:

chmod u+x /path/to/here/monitor.sh

now it is an exectuable:
./monitor.sh

